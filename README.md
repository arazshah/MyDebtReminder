# ربات یادآور بدهی - Debt Reminder Bot

یک ربات تلگرام به زبان فارسی برای مدیریت بدهی‌ها و یادآورهای خودکار.

## ویژگی‌ها

- ✅ مدیریت بدهی‌های مختلف (اجاره، قسطی، برق/گاز، خرید و ...)
- ✅ یادآورهای خودکار در زمان‌های مختلف (۷ روز، ۳ روز، ۱ روز قبل و در روز سررسید)
- ✅ پشتیبانی از بدهی‌های تکراری (ماهانه، هفتگی، سالانه)
- ✅ رابط کاربری ساده با دکمه‌های inline
- ✅ ذخیره امن داده‌ها در SQLite
- ✅ پشتیبانی از چندین کاربر بدون تداخل
- ✅ یادآورهای سفارشی برای رویدادهای غیر بدهی
- ✅ تمام متن‌ها به زبان فارسی

## نصب و راه‌اندازی

### پیش‌نیازها

- Python 3.8 یا بالاتر
- توکن ربات تلگرام از [@BotFather](https://t.me/botfather)

### مراحل نصب

1. کلون کردن پروژه:
```bash
git clone <repository-url>
cd MyDebtReminder
```

2. نصب وابستگی‌ها:
```bash
pip install -r requirements.txt
```

3. تنظیم متغیر محیطی توکن:
```bash
export TELEGRAM_BOT_TOKEN='your_bot_token_here'
```

4. اجرای ربات:
```bash
python main.py
```

## استفاده از ربات

### دستورات اصلی

- `/start` - شروع کار با ربات و نمایش راهنما
- `/help` - نمایش راهنمای کامل
- `/add_debt` - اضافه کردن بدهی جدید
- `/list_debts` - نمایش لیست بدهی‌های فعال
- `/pay_debt <id>` - علامت‌گذاری بدهی به عنوان پرداخت شده
- `/delete_debt <id>` - حذف بدهی
- `/add_reminder` - اضافه کردن یادآور سفارشی

### اضافه کردن بدهی

برای اضافه کردن بدهی جدید از دستور `/add_debt` استفاده کنید و اطلاعات را به فرمت زیر وارد کنید:

```
دسته‌بندی,مبلغ,تاریخ سررسید,توضیحات,تکرار
```

**مثال:**
```
اجاره,۲۰۰۰۰۰۰,۲۰۲۴-۱۲-۰۱,اجاره ماهانه آپارتمان,monthly
```

### یادآورهای خودکار

ربات به صورت خودکار یادآورهای زیر را ارسال می‌کند:
- **۷ روز قبل:** یادآور اولیه
- **۳ روز قبل:** یادآور نزدیک
- **۱ روز قبل:** یادآور فوری
- **در روز سررسید:** یادآور سررسید

## ساختار پروژه

```
MyDebtReminder/
├── main.py              # فایل اصلی برنامه
├── bot_handler.py       # مدیریت ربات و دستورات
├── database.py          # مدیریت پایگاه داده
├── debt_manager.py      # منطق مدیریت بدهی‌ها
├── reminder_service.py  # سرویس یادآورها
├── requirements.txt     # وابستگی‌های Python
└── README.md           # این فایل
```

## امنیت

- توکن ربات از متغیر محیطی خوانده می‌شود
- داده‌های کاربران جداگانه ذخیره می‌شوند
- ورودی‌ها اعتبارسنجی می‌شوند
- از SQL Injection جلوگیری شده است

## استقرار

### با Docker (توصیه شده)

#### پیش‌نیازها

- Docker و Docker Compose نصب شده باشند

#### مراحل استقرار

1. کلون کردن پروژه:
```bash
git clone <repository-url>
cd MyDebtReminder
```

2. کپی کردن فایل نمونه متغیرهای محیطی:
```bash
cp .env.example .env
```

3. ویرایش فایل `.env` و قرار دادن توکن ربات:
```bash
nano .env
# یا هر ویرایشگر دیگر
```

4. ساخت و اجرای کانتینر:
```bash
docker-compose up -d --build
```

5. مشاهده لاگ‌ها:
```bash
docker-compose logs -f
```

6. توقف ربات:
```bash
docker-compose down
```

#### مدیریت داده‌ها

داده‌های ربات (پایگاه داده SQLite) در دایرکتوری `data/` ذخیره می‌شوند که به عنوان volume در Docker mount شده است.

### روش‌های دیگر استقرار

#### روی سرور محلی

```bash
# اجرای مداوم با nohup
nohup python main.py &

# یا با screen
screen -S debt-bot python main.py
```

#### روی Heroku

1. ایجاد اپ Heroku
2. تنظیم متغیر محیطی `TELEGRAM_BOT_TOKEN`
3. استقرار کد

#### روی VPS

```bash
# نصب supervisor برای مدیریت فرآیند
sudo apt install supervisor
# تنظیم supervisor برای اجرای ربات
```

## پشتیبانی

در صورت بروز مشکل یا سوال، لطفاً issue جدید ایجاد کنید.

## لایسنس

این پروژه تحت لایسنس MIT منتشر شده است.
